# Codebase Analysis Documentation

This directory contains comprehensive documentation of the Curiocity (Apex) codebase.

## üìÑ Main Document

**[CODEBASE_KNOWLEDGE.md](./CODEBASE_KNOWLEDGE.md)** - Complete codebase reference (2,868 lines, 67KB)

This is a self-contained knowledge document for developers to:

- Understand the application architecture
- Implement new features
- Fix bugs safely
- Refactor with confidence
- Onboard new team members

## üìã What's Inside

### 1. High-Level Overview

- Application purpose and business domain
- Tech stack (Next.js 14, TypeScript, DynamoDB, S3)
- Main features and use cases
- Repository structure

### 2. System Architecture

- Architecture patterns and layers
- Component interaction maps
- Data flow diagrams (3 complete flows)
- Database architecture with deduplication model
- Cross-cutting concerns (auth, state, errors, analytics)

### 3. Feature Catalog

Detailed analysis of all 15 features:

- Document Management
- Resource Upload & Deduplication
- File Parsing (LlamaCloud)
- Search & Filtering
- User Authentication (Google OAuth + Email/Password)
- Folder Management
- Notes & Metadata
- Analytics (PostHog)
- And more...

Each feature includes:

- Business purpose
- Technical implementation
- Data flow with file references
- Key functions (with line numbers)
- Database operations
- Interactions with other features
- Edge cases and gotchas

### 4. Critical Nuances & Gotchas

- Design decisions and rationale
- Performance considerations
- Security implications
- Hardcoded business rules
- Hidden dependencies
- Known bugs with explanations

### 5. Technical Reference

- Key classes and functions with signatures
- Complete type definitions
- API patterns and conventions

### 6. Domain Glossary

- Definitions of domain terms
- Explanation of key concepts
- Architecture terminology

### 7. Database Schema

- All 5 DynamoDB tables documented
- Schema with field descriptions
- Relationships and foreign keys
- Access patterns
- Mermaid ER diagram

### 8. API Reference

- Complete API endpoint documentation
- Request/response formats
- Query parameters
- Side effects and PostHog events
- File references for each endpoint

### 9. Development Guide

- Getting started (prerequisites, setup)
- Environment variables
- Development commands
- Code style and conventions
- Testing guide
- Common development tasks
- Debugging tips
- Deployment process
- Architecture improvement roadmap

## üéØ How to Use This Documentation

### For New Developers

1. Read **Section 1** (High-Level Overview) first
2. Review **Section 2** (Architecture) to understand structure
3. Reference **Section 3** (Features) as needed
4. Use **Section 8** (API Reference) for endpoint details

### For Implementing Features

1. Find related feature in **Section 3**
2. Review **Section 4** (Gotchas) for pitfalls
3. Check **Section 7** (Database Schema) for data model
4. Reference **Section 8** (API Reference) for endpoints
5. Follow patterns in **Section 9** (Development Guide)

### For Fixing Bugs

1. Search document for error message or component
2. Review **Section 4** (Known Bugs)
3. Check **Section 5** (Technical Reference) for function details
4. Use **Section 9** (Debugging) for common issues

### For Refactoring

1. Read **Architecture Audit** in `/docs/audits/`
2. Review **Section 4** (Design Decisions)
3. Check **Architecture Improvements** in Section 9
4. Reference **Section 2** for current architecture

## üìä Document Statistics

- **Total Lines**: 2,868
- **File Size**: 67KB
- **Sections**: 9 major sections
- **Features Documented**: 15
- **API Endpoints**: 28+
- **Database Tables**: 5
- **Code References**: 100+
- **Diagrams**: 7 Mermaid diagrams

## üîÑ Updates

This document was generated on **2025-11-05** by analyzing the codebase directly.

To update:

1. Re-run the codebase analysis
2. Or manually edit with caution (maintain consistency)

## üóÇÔ∏è Related Documentation

- **Architecture Audit**: `/docs/audits/architecture-audit-2025-11-05.md`
- **Project README**: `/README.md`
- **Development Guide**: `/CLAUDE.md`

## üìù Notes

- All file paths are relative from repository root
- Line numbers are accurate as of generation date
- Mermaid diagrams can be rendered in GitHub or compatible viewers
- STATE BLOCK at end contains metadata for regeneration

---

**Generated by**: Claude Code Architecture Analysis
**Date**: 2025-11-05
**Version**: 1.0
